<!DOCTYPE html>
<html>

<head>
  <title>Matching Game by Ming Chan</title>
  <style>
  body {
    width: 1000px;
    margin: 0 auto;
    text-align: center;
    font-family: HanHei TC, PingFang HK, Helvetica Neue;
  }
  
  div {
    position: absolute;
  }
  
  #leftSide {
    float: left;
    width: 500px;
    height: 500px;
    background-color: #FFEFD0;
  }
  
  #rightSide {
    left: 500px;
    width: 500px;
    height: 500px;
    background-color: #CFFFE5;
    border-left: 1px solid #979688;
  }
  
  img {
    position: absolute;
  }
  </style>
</head>

<body onload="generateFaces()">
  <h1>Matching Game</h1>
  <p>Click on the extra smiling face on the <strong style="font-size: 20px; color: red;">left</strong></p>
  <div>
    <div id="leftSide"></div>
    <div id="rightSide"></div>
  </div>
</body>
<script>
var numOfFaces = 5,
  theLeftSide = document.getElementById('leftSide'),
  theRightSide = document.getElementById('rightSide'),
  theBody = document.getElementsByTagName('div')[1];

var generateFaces = function() {
    for (var i = 0; i < numOfFaces; i++) {
      //create an element img and set those position values
      var img = document.createElement('img');
      img.setAttribute('src', 'http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png');
      img.style.top = Math.random() * 400 + "px";
      img.style.left = Math.random() * 400 + "px";
      theLeftSide.appendChild(img);
    }

    var leftSideImages = [];
    for (var i = 0; i < theLeftSide.childNodes.length; i++) {
      // statements
      leftSideImages.push(theLeftSide.childNodes[i].cloneNode(true));
    }
    leftSideImages.pop();
    //console.log(leftSideImages);
    leftSideImages.forEach(function(element, index) {
      theRightSide.appendChild(element);
    });

    //create eventhandler to extra face
    theLeftSide.lastChild.onclick = function nextLevel(event) {
        event.stopPropagation();
        numOfFaces += 5;
        reset();
        generateFaces();
      }
      //create eventhandler to body to detect worng click
    theBody.onclick = function gameOver() {
      alert("Game Over!");
      theBody.onclick = null;
      theLeftSide.lastChild.onclick = null;
    };


  }
  // remove both side of the gameboard before next level
var reset = function() {
  while (theLeftSide.firstChild) {
    theLeftSide.removeChild(theLeftSide.firstChild);
  }
  while (theRightSide.firstChild) {
    theRightSide.removeChild(theRightSide.firstChild);
  }
}
</script>

</html>
